# Vundle
alias vundle='nvim -u ~/.nvimrc.bundles +PluginInstall +qall'

# Shortcuts
alias aliases='nvim ~/.aliases'
alias cl='clear'
alias dbox='~/Dropbox'
alias box='~/Box\ Sync'
alias dotfiles='~/Dropbox/dotfiles'
alias vi='nvim'
alias tree="tree -C"
alias rm='rm -i'
alias mv='mv -i'
alias cp='cp -i'
alias grep='ggrep'
alias -g browse="hub browse"

# Tmux
alias tk='tmux kill-session'

# ZSH
alias reload="source ~/.zshrc"
alias zshconfig="nvim ~/.zshrc"
alias ohmyzsh="nvim ~/.oh-my-zsh"

# git
alias gs='git status'
alias ga='git add'
alias gb='git branch'
alias gc='git commit'
alias gd='git diff'
alias go='git checkout '
alias gh='git hist'
alias gk='gitk --all&'
alias gx='gitx --all'
alias gpoh='git push origin HEAD'
alias gpfoh='git push -f origin HEAD'
alias gpr='git pull --rebase'
alias gprh='git pull --rebase origin HEAD'
alias gprom='git pull --rebase origin master'
alias obranches='for k in $(git branch | sed /\*/d); do echo "$(git log -1 --pretty=format:"%ct" $k) $k"; done | sort | awk "{print $2}"'
alias -g poop=pop
alias -g assume_unchanged="update-index --assume-unchanged"

# Database
alias startpg="postgres -D /usr/local/var/postgres"
alias startredis="redis-server /usr/local/etc/redis.conf"
alias startmongo="mongod --config /usr/local/etc/mongod.conf"

# Rails
alias create!="rake db:create"
alias drop!="rake db:drop"
alias MIGRATE!="rake db:migrate && rake db:rollback && rake db:migrate"
alias migrate="rake db:migrate && db:rollback && rake db:migrate"
alias seed!="rake db:seed"
alias roll!="rake db:rollback"
alias cpdatabase="cp config/database.example.yml config/database.yml"

function rails_new() {
  rails new $1 -T -B -d=postgresql &&
  cd $1 &&
  echo "populating ruby version file" &&
  populate_ruby_version_file &&
  cd .. && cd $1
}

function populate_ruby_version_file() {
  ruby -v | cut -d ' ' -f 2 | cut -d p -f 1 >> .ruby-version
}
